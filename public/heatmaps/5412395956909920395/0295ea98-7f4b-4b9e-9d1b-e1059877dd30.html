<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heat map for - Amour Plumbing Services</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC6av-FESCOQG9F-G4oZ0k9KVweacH3KIU"></script>
    <style>
        :root {
            --primary: #f97316;
            --secondary: #f97316;
            --accent: #f59e0b;
            --background: #f8fafc;
            --card: #ffffff;
            --text: #1f2937;
            --border: #e5e7eb;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        body {
            font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
                Roboto, sans-serif;
            background-color: var(--background);
            color: var(--text);
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            font-size: 11px;
        }

        .average-rank-card {
            /* position: absolute; */
            width: auto;
            height: auto;
            background: white;
            padding: 20px;
            text-align: center;
            overflow: auto;
            z-index: 10;
      }

      .rank-number {
        font-size: 32px;
        font-weight: bold;
        color: #4caf50;
        background: #e8f5e9;
        padding: 10px 20px;
        border-radius: 8px;
        display: inline-block;
        transform: translateY(-10px);
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
      }

      .chart-container {
        display: flex;
        background: white;
        padding: 20px;
        border-radius: 10px;
        /* box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); */
      }

      .title {
        font-size: 16px;
        font-weight: bold;
        color: #333;
        margin-bottom: 10px;
      }

        .dashboard-container {
            display: grid;
            grid-template-columns: 55% 45%;
            grid-template-rows: auto auto 1fr;
            height: calc(100vh - 40px);
        }

        .header {
            grid-column: 1 / 3;
            background-color: white;
            padding: 6px 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 40px;
            border-bottom: 1px solid var(--border);
        }

        .map-container {
            grid-column: 1;
            grid-row: 2;
            padding: 6px;
            display: flex;
            flex-direction: column;
        }

        .data-container {
            grid-column: 2;
            grid-row: 2;
            padding: 6px;
            display: grid;
            grid-template-rows: auto auto 1fr;
            gap: 6px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }

        .card {
            background-color: var(--card);
            border-radius: 0.375rem;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            padding: 8px;
            border: 1px solid var(--border);
            align-self: center;
            height: 100%;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .card-title::before {
            content: "";
            display: block;
            width: 3px;
            height: 12px;
            background-color: var(--secondary);
            border-radius: 2px;
        }

        #map {
            height: calc(100vh - 100px);
            width: 100%;
            border-radius: 0.375rem;
            border: 1px solid var(--border);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
        }

        .chart-container {
            height: 200px;
            position: relative;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.125rem 0.375rem;
            border-radius: 9999px;
            font-size: 0.8rem;
            font-weight: 500;
            text-wrap: pretty;
        }

        .badge-orange {
            background-color: #ffedd5;
            color: #c2410c;
            padding-left: 1rem;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
            height: 93%;
        }

        .data-table th,
        .data-table td {
            padding: 4px 6px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .data-table th {
            background-color: #f8fafc;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            font-size: 0.6rem;
            letter-spacing: 0.05em;
        }

        .data-table tr:hover {
            background-color: #f8fafc;
        }

        .summary-stats {
            display: flex;
            gap: 6px;
            margin-top: 6px;
        }

        .summary-stat {
            flex: 1;
            background-color: white;
            border-radius: 0.375rem;
            padding: 6px;
            text-align: center;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .summary-stat::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--secondary);
        }

        .summary-stat-value {
            font-size: 1rem;
            font-weight: 700;
        }

        .summary-stat-label {
            font-size: 0.6rem;
            color: #64748b;
            margin-top: 0.125rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6px;
            width: 100%;
            height: 100%;
        }

        .metric-pill {
            display: inline-flex;
            align-items: center;
            padding: 3px 6px;
            border-radius: 9999px;
            font-size: 0.65rem;
            font-weight: 600;
            gap: 3px;
        }

        .metric-pill-red {
            background-color: #fee2e2;
            color: #b91c1c;
        }

        .metric-pill-yellow {
            background-color: #fef3c7;
            color: #92400e;
        }

        .metric-pill-green {
            background-color: #d1fae5;
            color: #065f46;
        }

        .metric-pill-orange {
            background-color: #ffedd5;
            color: #c2410c;
        }

        .keyword-cell {
            max-width: 120px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .performance-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 4px;
        }

        .performance-good {
            background-color: #10b981;
        }

        .performance-medium {
            background-color: #f59e0b;
        }

        .performance-poor {
            background-color: #ef4444;
        }

        /* Animations */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        @media (width <= 1500px) {
            
            .grid-2 {
            display: grid;
            grid-template-columns: 1fr;
            gap: 6px;
            width: 100%;
            height: 100%;
        }
        }
    </style>
</head>

<body>

    <div class="header">
        <div>
            <h1 class="text-sm font-bold text-gray-900">Amour Plumbing Services</h1>
            <p class="text-xs text-gray-500">
                37.5194209, -121.9462696
            </p>
        </div>
        <div class="flex items-center gap-2">
            <div class="metric-pill metric-pill-red">
                <span class="inline-block w-2 h-2 rounded-full bg-red-600"></span>
                <span data-field="low_relevance" data-text="Low count: ">Low: 37</span>
            </div>
            <div class="metric-pill metric-pill-yellow">
                <span class="inline-block w-2 h-2 rounded-full bg-yellow-600"></span>
                <span data-field="medium_relevance" data-text="Med count: ">Med: 22</span>
            </div>
            <div class="metric-pill metric-pill-green">
                <span class="inline-block w-2 h-2 rounded-full bg-green-600"></span>
                <span data-field="high_relevance" data-text="High count: ">High: 5</span>
            </div>
            <div class="metric-pill metric-pill-orange">
                <span class="inline-block w-2 h-2 rounded-full bg-orange-600"></span>
                <span data-field="avg_rank_value" data-text="Avg: ">Avg: 5.421875</span>
            </div>
        </div>
    </div>

    <div class="dashboard-container">
        <!-- Map Section (Left Side) -->
        <div class="map-container">
            <div id="map" style="position: relative; overflow: hidden;"></div>
            <div class="summary-stats">
                <div class="summary-stat">
                    <div id="avg-keyword-rank" class="summary-stat-value text-orange-700">5.4</div>
                    <div class="summary-stat-label">Avg Keyword Rank</div>
                </div>
                <div class="summary-stat">
                    <div id="avg-final-rank" class="summary-stat-value text-orange-800">5.4</div>
                    <div class="summary-stat-label">Avg Final Rank</div>
                </div>
                <div class="summary-stat">
                    <div id="avg-percentage" class="summary-stat-value text-orange-700">72.9%</div>
                    <div class="summary-stat-label">Avg Percentage</div>
                </div>
            </div>
        </div>

        <!-- Data Section (Right Side) -->
        <div class="data-container">
            <div class="grid-2">
                <!-- Relevance Distribution -->
                <div class="card">
                    <div class="card-title">Relevance Distribution</div>
                    <div class="average-rank-card">
                        <div>
                            <div class="title">Average Rank</div>
                            <div class="rank-number" id="rankNumber"></div>
                        </div>
                        <div class="chart-container">
                          <canvas id="doughnutChart"></canvas>
                        </div>
                      </div>
                </div>
                
                <div class="card">
                    <div class="card-title">Rank Distribution</div>
                    <div class="chart-container" style="max-height: 90%; min-height: 90%;">
                        <canvas id="rankDistributionChart" width="357" height="100"
                            style="display: block; box-sizing: border-box; height: 100px; width: 357px;"></canvas>
                    </div>
                </div>
            </div>

            <!-- Overall Performance -->
            <!-- <div class="card">
                <div class="card-title">Overall Performance</div>
                <div class="chart-container">
                    <canvas id="overallPerformanceChart" width="738" height="100"
                        style="display: block; box-sizing: border-box; height: 100px; width: 738px;"></canvas>
                </div>
            </div> -->

            <!-- Keyword Performance -->
            <div class="card" style="align-self: self-start; min-height:calc(100vh / 2);">
                <div class="card-title">Keyword Performance Summary</div>
                <div class="overflow-x-auto">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Keyword</th>
                                <th>Avg Rank</th>
                                <th>Avg Final</th>
                                <th>Avg %</th>
                                <th>Locations</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="keywordTableBody">
                            <!-- Table rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>

        const colors = {
            blue: {
                fill: "#4285F4", // Vibrant blue
                stroke: "#000", // Deep navy blue for contrast
                // stroke: "#1E3A8A", // Deep navy blue for contrast
                circleFill: "#1E3A8A", // Softer blue
                circleStroke: "#1E3A8A",
                textFill: "white" // White text for high visibility
            },
            lightGreen: {
                fill: "#66BB6A", // Soft green
                stroke: "#000", // Deep forest green
                // stroke: "#2E7D32", // Deep forest green
                circleFill: "#2E7D32", // Pale green for contrast
                circleStroke: "#2E7D32",
                textFill: "white"
            },
            darkGreen: {
                fill: "#2E7D32", // Deep green
                stroke: "#000", // Almost white green
                // stroke: "#1B5E20", // Almost white green
                circleFill: "#1B5E20", // Medium green for contrast
                circleStroke: "#1B5E20",
                textFill: "white"
            },
            lilaGreen: {
                fill: "#4A8F4A", // Muted deep green
                stroke: "#000", // Darker forest green
                // stroke: "#2E5732", // Darker forest green
                circleFill: "#2E5732", // Soft pastel green
                circleStroke: "#2E5732",
                textFill: "white"
            },
            neonGreen: {
                fill: "#00E676", // Vibrant neon green
                stroke: "#000", // Darker neon contrast
                // stroke: "#00A152", // Darker neon contrast
                circleFill: "#00A152", // Lighter neon for balance
                circleStroke: "#00A152",
                textFill: "white"
            },
            yellow: {
                fill: "#FDD835", // Bright golden yellow
                stroke: "#000", // Deep mustard yellow
                // stroke: "#F9A825", // Deep mustard yellow
                circleFill: "#F9A825", // Soft pastel yellow
                circleStroke: "#F9A825",
                textFill: "white"
            },
            darkYellow: {
                fill: "#FB8C00", // Vivid orange
                stroke: "#000", // Burnt orange
                // stroke: "#000", // Burnt orange
                circleFill: "#FB8C00", // Light warm orange
                circleStroke: "#FF8C00",
                textFill: "white"
            },
            red: {
                fill: "#C62828", // Softer red for reduced harshness
                stroke: "#000", // Muted deep red
                // stroke: "#8E1C1C", // Muted deep red
                circleFill: "#8E1C1C", // Soft coral red
                circleStroke: "#8E1C1C",
                textFill: "white"
            },
            darkRed: {
                fill: "#B71C1C", // Intense dark red
                stroke: "#000", // Almost white-red
                // stroke: "#7F0000", // Almost white-red
                circleFill: "#7F0000", // Muted red tone
                circleStroke: "#7F0000",
                textFill: "white"
            },
            darkYellow_: {
                fill: "#F9A825", // Rich dark golden yellow
                stroke: "#000", // Deep amber
                // stroke: "#BF9000", // Deep amber
                circleFill: "#F9A825", // Warm muted yellow
                circleStroke: "#BF9000",
                textFill: "white"
            },
            darkOrange: {
                fill: "#E65100", // Deep orange
                stroke: "#000", // Black for contrast
                circleFill: "#E65100", // Strong warm orange
                circleStroke: "#FF5722", // Bright reddish-orange
                textFill: "white"
                }

        };

        const mapStarIcon = (number, color = colors.blue) => {
            return ``;
        };

        const mapXIcon = (number, color = colors.red) => {
            const XIcon = `
  
  <svg width="140" height="140" viewBox="0 0 140 140" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <filter id="xShadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="0" dy="3" stdDeviation="2" flood-opacity="0.3" />
    </filter>
  </defs>

  <!-- Smooth, Rounded "X" with Extended Axes -->
  <path d="M15 15 L125 125 M125 15 L15 125"
        stroke="#E74C3C"
        stroke-width="22"
        stroke-linecap="round"
        stroke-linejoin="round"
        filter="url(#xShadow)"/>

  <!-- Well-Balanced Ci7cle -->
  <circle cx="70" cy="75" r="40" fill="#C0392B" stroke="#A93226" stroke-width="9" filter="url(#xShadow)"/>

  <!-- Clearly Visible, Well-Positioned Number -->
  <text x="70" y="78" text-anchor="middle" dominant-baseline="middle" fill="#FFF"
        font-family="Arial, sans-serif" font-weight="bold" font-size="50">
${number}
  </text>
</svg>
  `;

            const XIconPlus = `
      <svg width="140" height="140" viewBox="0 0 140 140" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <filter id="xShadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="0" dy="3" stdDeviation="2" flood-opacity="0.3" />
    </filter>
  </defs>

  <!-- Smooth, Rounded "X" with Extended Axes -->
  <path d="M15 15 L125 125 M125 15 L15 125"
        stroke="#E74C3C"
        stroke-width="22"
        stroke-linecap="round"
        stroke-linejoin="round"
        filter="url(#xShadow)"/>

  <!-- Well-Balanced Circle -->
  <circle cx="70" cy="72" r="49" fill="#C0392B" stroke="#A93226" stroke-width="10" filter="url(#xShadow)"/>

  <!-- Clearly Visible, Well-Positioned Number -->
  <text x="75" y="78" text-anchor="middle" dominant-baseline="middle" fill="#FFF"
        font-family="Arial, sans-serif" font-weight="bold" font-size="50">
${number}+
  </text>
</svg>
  `;

            return number >= 20 ? XIconPlus : XIcon;
        };

        const mapFlagIcon = (number, color = colors.red) => {
            return `
  <svg width="160" height="120" viewBox="0 0 160 120" fill="none" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <filter id="flagShadow" x="-10%" y="-10%" width="120%" height="120%">
            <feDropShadow dx="0" dy="3" stdDeviation="2" flood-opacity="0.3" />
        </filter>
    </defs>

    <rect x="20" y="10" width="14" height="160" fill="#7F0000" rx="7" ry="7"/>
    <path d="M34 10
            Q150 5 130 45
            Q110 80 34 70
            Z"
          fill="#B71C1C"
          stroke="#7F0000"
          stroke-width="5"
          filter="url(#flagShadow)"/>

    <rect x="45" y="15.5" width="60" height="50" rx="8" ry="8" fill="#C62828" stroke="#7F0000" stroke-width="3" opacity="0.9"/>

    <text x="75" y="45" text-anchor="middle" dominant-baseline="middle" fill="#FFF" font-family="Arial, sans-serif" font-weight="bold" font-size="50">${number}</text>
</svg>

  `;
        };

        const mapMarkIcon = (number, color = colors.lilaGreen) => {
            const twoDigit = `

      <svg width="73" height="109.5" viewBox="0 0 73 109.5" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="markerShadow" x="-20%" y="-10%" width="140%" height="140%">
            <feDropShadow dx="0" dy="2" stdDeviation="1.5" flood-opacity="0.25" />
          </filter>
          <filter id="circleShadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="1" stdDeviation="1" flood-opacity="0.3" />
          </filter>
        </defs>

        <!-- Map Marker Shape -->
        <path d="M36.5 109.5
                C25 90, 7 67, 7 43
                C7 20 22 7 36.5 7
                C51 7 66 20 66 43
                C66 67 48 90 36.5 109.5
                Z"
              fill="${color.fill}"
              filter="url(#markerShadow)" />
              
        <!-- Elegant outline -->
        <path d="M36.5 107.5
                C26 89, 9 66, 9 43
                C9 22 24 9 36.5 9
                C49 9 64 22 64 43
                C64 66 47 89, 36.5 107.5
                Z"
              stroke="${color.stroke}" stroke-width="3" fill="none"/>

        <!-- Adjusted Circle for Multi-Digit Numbers -->
        <circle cx="36.5" cy="38" r="24" fill="${color.circleFill}" filter="url(#circleShadow)" stroke="${color.circleStroke}" stroke-width="2.5" />

        <!-- Number inside (supports 10-99) -->
        <text x="50%" y="40" text-anchor="middle" dominant-baseline="middle" fill="${color.textFill}" font-family="Arial, sans-serif" font-weight="bold" font-size="35">${number}</text>
      </svg>
  `;

            const oneDigit = `
  <svg width="73" height="109.5" viewBox="0 0 73 109.5" fill="none" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <filter id="markerShadow" x="-20%" y="-10%" width="140%" height="140%">
        <feDropShadow dx="0" dy="2" stdDeviation="1.5" flood-opacity="0.25" />
      </filter>
      <filter id="circleShadow" x="-20%" y="-20%" width="140%" height="140%">
        <feDropShadow dx="0" dy="1" stdDeviation="1" flood-opacity="0.3" />
      </filter>
    </defs>

    <!-- Map Marker Shape -->
    <path d="M36.5 109.5
            C25 90, 7 67, 7 43
            C7 20 22 7 36.5 7
            C51 7 66 20 66 43
            C66 67 48 90 36.5 109.5
            Z"
          fill="${color.fill}"
          filter="url(#markerShadow)" />

    <!-- Elegant outline -->
    <path d="M36.5 107.5
            C26 89, 9 66, 9 43
            C9 22 24 9 36.5 9
            C49 9 64 22 64 43
            C64 66 47 89, 36.5 107.5
            Z"
          stroke="${color.stroke}" stroke-width="3" fill="none"/>

    <!-- Circle for number -->
    <circle cx="36.5" cy="38" r="22" fill="${color.circleFill}" filter="url(#circleShadow)" stroke="${color.circleStroke}" stroke-width="2.5" />

    <!-- Number inside -->
    <text x="50%" y="42" text-anchor="middle" dominant-baseline="middle" fill="${color.textFill}" font-family="Arial, sans-serif" font-weight="bold" font-size="40">${number}</text>
  </svg>
`;

            return number > 9 ? twoDigit : oneDigit;
        };

        const SGVIcons = (rankType) => {
            switch (rankType) {
                case 1: {
                    return mapMarkIcon(rankType, colors.neonGreen);
                }
                case 2: {
                    return mapMarkIcon(rankType, colors.neonGreen);
                }
                case 3: {
                    return mapMarkIcon(rankType, colors.lightGreen);
                }
                case 4: {
                    return mapMarkIcon(rankType, colors.lilaGreen);
                }
                case 5:
                case 6:
                case 7:
                case 8: {
                    return mapMarkIcon(rankType, colors.yellow);
                }
                case 9:
                case 10: {
                    return mapMarkIcon(rankType, colors.darkYellow);
                }
                case 11:
                case 12: {
                    return mapMarkIcon(rankType, colors.darkOrange);
                }
                case 13:
                case 14:
                case 15: {
                    return mapMarkIcon(rankType, colors.red);
                }

                case 16:
                case 17:
                case 18:
                case 19: {
                    return mapFlagIcon(rankType, colors.darkRed);
                }

                default:
                    return mapXIcon(rankType, colors.darkRed);
            }
        };

        const seoData = {'high_relevance': 0.0, 'medium_relevance': 0.0, 'low_relevance': 130.0, 'avg_rank_value': 20.0, 'average_rank_percentage': 0.0, 'main_coordinates': [37.5194209, -121.9462696]}

        for (const k in seoData) {

            const element = document?.querySelector(`[data-field='${k}']`)
            if (element) {
                element.innerHTML = element.dataset.text + seoData[k].toFixed(2)
            }
        }

        let locationData = [{'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5194209, 'lng': -121.9462696, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5194209, 'lng': -121.92359229899843, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.53499760713796, 'lng': -121.9349309494992, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.53499760713796, 'lng': -121.95760825050078, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5194209, 'lng': -121.96894690100156, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.50384419286204, 'lng': -121.95760825050078, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.50384419286204, 'lng': -121.9349309494992, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5194209, 'lng': -121.90091499799686, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.53740733211838, 'lng': -121.90699136248675, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.55057431427591, 'lng': -121.92359229899843, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.55539376423675, 'lng': -121.9462696, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.55057431427591, 'lng': -121.96894690100156, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.53740733211838, 'lng': -121.98554783751324, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5194209, 'lng': -121.99162420200312, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.50143446788162, 'lng': -121.98554783751324, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.48826748572409, 'lng': -121.96894690100156, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.48344803576325, 'lng': -121.9462696, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.48826748572409, 'lng': -121.92359229899843, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.50143446788162, 'lng': -121.90699136248675, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5194209, 'lng': -121.87823769699528, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.537876066273135, 'lng': -121.88234052276846, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.55410526712448, 'lng': -121.89415413874843, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.56615102141387, 'lng': -121.91225364849764, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.57256043339761, 'lng': -121.93445598402002, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.57256043339761, 'lng': -121.95808321597997, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.56615102141387, 'lng': -121.98028555150235, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.55410526712448, 'lng': -121.99838506125155, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.537876066273135, 'lng': -122.01019867723153, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5194209, 'lng': -122.0143015030047, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.500965733726865, 'lng': -122.01019867723153, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.48473653287552, 'lng': -121.99838506125155, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.47269077858613, 'lng': -121.98028555150235, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.46628136660239, 'lng': -121.95808321597997, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.46628136660239, 'lng': -121.93445598402002, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.47269077858613, 'lng': -121.91225364849764, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.48473653287552, 'lng': -121.89415413874843, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.500965733726865, 'lng': -121.88234052276846, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5194209, 'lng': -121.85556039599372, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.537313075096066, 'lng': -121.85841019244013, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.55408101902803, 'lng': -121.86678051858784, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.56867114021046, 'lng': -121.88014543606106, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.58016668767076, 'lng': -121.89766517794222, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.587845353884326, 'lng': -121.91823891441584, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.59122466001279, 'lng': -121.94057392195435, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.590092271823906, 'lng': -121.9632668098917, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5845193414322, 'lng': -121.98489170062021, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.57485603654998, 'lng': -122.0040898227246, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.56170953816216, 'lng': -122.0196548875873, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.54590588911188, 'lng': -122.03060888493866, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.52843809079072, 'lng': -122.03626353483915, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.51040370920928, 'lng': -122.03626353483915, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.49293591088812, 'lng': -122.03060888493866, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.47713226183784, 'lng': -122.0196548875873, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.46398576345002, 'lng': -122.0040898227246, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.4543224585678, 'lng': -121.98489170062021, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.448749528176094, 'lng': -121.9632668098917, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.44761713998721, 'lng': -121.94057392195435, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.450996446115674, 'lng': -121.91823891441584, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.45867511232924, 'lng': -121.89766517794222, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.47017065978954, 'lng': -121.88014543606106, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.48476078097197, 'lng': -121.86678051858784, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.501528724903935, 'lng': -121.85841019244013, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5194209, 'lng': -121.83288309499216, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.53752411083552, 'lng': -121.83520412341085, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.554886174092395, 'lng': -121.84207218549072, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.57079628486094, 'lng': -121.8532061019633, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.58460308133692, 'lng': -121.86815004897998, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.595741311650386, 'lng': -121.8862922195941, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.60375497534362, 'lng': -121.90688987120906, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.608315992083455, 'lng': -121.92909973354764, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.60923763330866, 'lng': -121.95201253223617, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.60648216691919, 'lng': -121.97469021460418, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.60016240203279, 'lng': -121.996204353671, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.59053707056644, 'lng': -122.01567415805546, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5780002347213, 'lng': -122.03230253167844, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5630651540299, 'lng': -122.04540870697005, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.54634327245053, 'lng': -122.05445611557397, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.528519185779786, 'lng': -122.05907435551892, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.510322614220215, 'lng': -122.05907435551892, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.49249852754947, 'lng': -122.05445611557397, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.4757766459701, 'lng': -122.04540870697005, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.4608415652787, 'lng': -122.03230253167844, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.44830472943356, 'lng': -122.01567415805546, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.43867939796721, 'lng': -121.996204353671, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.43235963308081, 'lng': -121.97469021460418, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.42960416669134, 'lng': -121.95201253223617, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.430525807916545, 'lng': -121.92909973354764, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.43508682465638, 'lng': -121.90688987120906, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.443100488349614, 'lng': -121.8862922195941, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.45423871866308, 'lng': -121.86815004897998, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.46804551513906, 'lng': -121.8532061019633, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.483955625907605, 'lng': -121.84207218549072, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.50131768916448, 'lng': -121.83520412341085, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.5194209, 'lng': -121.81020579399059, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.537659230696015, 'lng': -121.81216294797466, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.55537287782435, 'lng': -121.81797810617013, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.57205225200827, 'lng': -121.82748397706335, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.58721751802058, 'lng': -121.84040709405603, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.600432398769435, 'lng': -121.85637568260132, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.61131672619595, 'lng': -121.87493035548074, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.61955737801712, 'lng': -121.89553732853794, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.624917285683765, 'lng': -121.9176037766771, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.62724225441107, 'lng': -121.94049488836151, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.62646539908182, 'lng': -121.96355212798576, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.62260906840941, 'lng': -121.9861121807461, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.61578420200609, 'lng': -122.00752603499957, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.60618713885228, 'lng': -122.02717765314742, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.594093968981575, 'lng': -122.04450169391512, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.579852590873195, 'lng': -122.05899977619163, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.56387270304609, 'lng': -122.07025481654641, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.54661401777854, 'lng': -122.07794302796046, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.52857303602289, 'lng': -122.0818432345893, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.51026876397711, 'lng': -122.0818432345893, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.49222778222146, 'lng': -122.07794302796046, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.47496909695391, 'lng': -122.07025481654641, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.458989209126806, 'lng': -122.05899977619163, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.444747831018425, 'lng': -122.04450169391512, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.43265466114772, 'lng': -122.02717765314742, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.42305759799391, 'lng': -122.00752603499957, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.41623273159059, 'lng': -121.9861121807461, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.41237640091818, 'lng': -121.96355212798576, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.41159954558893, 'lng': -121.94049488836151, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.413924514316236, 'lng': -121.9176037766771, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.41928442198288, 'lng': -121.89553732853794, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.42752507380405, 'lng': -121.87493035548074, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.438409401230565, 'lng': -121.85637568260132, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.45162428197942, 'lng': -121.84040709405603, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.46678954799173, 'lng': -121.82748397706335, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.48346892217565, 'lng': -121.81797810617013, 'average_percentage': 0.0, 'final_rank': 20}, {'data': [{'keyword': 'Drain Cleaning, Faucet Repair, Garbage Disposal Repair, Leak Repair, AC Filter Replacement, AC Repair, Furnace Installation, Furnace Repair, Heat Pump, Sewer Lines and Excavation, Sink Repair, Toilet Repair, Water Heater Services, Shower Repair', 'location_rank': {'rank': 21.0, 'percentage': 0.0}, 'percentage': 0.0}], 'lat': 37.501182569303985, 'lng': -121.81216294797466, 'average_percentage': 0.0, 'final_rank': 20}]

        function calculateKeywordAverages() {
            const keywords = {};

            locationData.forEach((location) => {
                location.data.forEach((item) => {
                    if (!keywords[item.keyword]) {
                        keywords[item.keyword] = {
                            totalRank: 0,
                            totalFinalRank: 0,
                            totalPercentage: 0,
                            locations: [],
                            count: 0
                        };
                    }

                    keywords[item.keyword].totalRank += item.location_rank.rank;
                    keywords[item.keyword].totalFinalRank += location.final_rank;
                    keywords[item.keyword].totalPercentage += item.percentage;
                    keywords[item.keyword].locations.push({
                        lat: location.lat,
                        lng: location.lng,
                        rank: item.location_rank.rank,
                        finalRank: location.final_rank,
                        percentage: item.percentage
                    });
                    keywords[item.keyword].count++;
                });
            });

            const keywordAverages = {};
            for (const [keyword, data] of Object.entries(keywords)) {
                keywordAverages[keyword] = {
                    avgRank: data.totalRank / data.count,
                    avgFinalRank: data.totalFinalRank / data.count,
                    avgPercentage: data.totalPercentage / data.count,
                    locations: data.locations,
                    count: data.count
                };
            }

            return keywordAverages;
        }

        function initMap() {
            const mainCoordinates = {
                lat: locationData[locationData.length - 1].lat,
                lng: locationData[locationData.length - 1].lng
            };

            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 17,
                center: mainCoordinates,
                styles: [
                    {
                        featureType: "administrative",
                        elementType: "geometry",
                        stylers: [{ visibility: "off" }]
                    },
                    {
                        featureType: "poi",
                        stylers: [{ visibility: "off" }]
                    },
                    {
                        featureType: "road",
                        elementType: "labels.icon",
                        stylers: [{ visibility: "off" }]
                    },
                    {
                        featureType: "transit",
                        stylers: [{ visibility: "off" }]
                    }
                ]
            });

            // Create markers for each location
            locationData.forEach((location, index) => {
                // Determine marker color based on rank (better rank = greener)
                let markerColor = "#ef4444"; // Default red for poor rank

                if (location.final_rank <= 10) {
                    markerColor = "#10b981"; // Green for good rank
                } else if (location.final_rank <= 15) {
                    markerColor = "#f59e0b"; // Yellow for medium rank
                }

                const iconType = 'custom'

                let marker = {}
                if (iconType == "custom") {
                    marker = new google.maps.Marker({
                        position: { lat: location.lat, lng: location.lng },
                        map: map,
                        animation: google.maps.Animation.BOUNCE,
                        title: `Location ${index + 1}`,
                        icon: {
                            url:
                                "data:image/svg+xml;charset=UTF-8," +
                                encodeURIComponent(SGVIcons(location.final_rank)),
                            scaledSize: new google.maps.Size(50, 50),
                            anchor: new google.maps.Point(25, 50)
                        }
                    });
                }
                else {
                    marker = new google.maps.Marker({
                        position: { lat: location.lat, lng: location.lng },
                        map: map,
                        animation: google.maps.Animation.BOUNCE,
                        title: `Location ${index + 1}`,
                        icon: {
                            path: google.maps.SymbolPath.CIRCLE,
                            fillColor: '#f97316', // Orange
                            fillOpacity: 0.8,
                            strokeColor: '#ffffff',
                            strokeWeight: 2,
                            scale: 10
                        },
                        label: {
                            text: `${location.final_rank}`,
                            color: 'white',
                            fontSize: '10px'
                        },
                    });
                }

                // Create info window content with all keywords for this location
                let keywordsContent = "";
                location.data.forEach((item) => {
                    keywordsContent += `
                          <p style="margin: 0 0 3px;">
                              <strong>${item.keyword}:</strong>
                              Rank ${item.location_rank.rank},
                              Keyword relevance: ${item.location_rank.percentage}%
                          </p>
                      `;
                });
                // Add info window for each marker
                const infoContent = `
                      <div style="padding: 6px; max-width: 180px; font-size: 11px;">
                          <h3 style="margin: 0 0 4px; font-weight: bold;">Location number ${index + 1
                    }</h3>
                          <div style="margin-bottom: 3px;">
                              ${keywordsContent}
                          </div>
                          <p style="margin: 0 0 3px;"><strong>Avg Percentage:</strong> ${location.average_percentage
                    }%</p>
                          <p style="margin: 0 0 3px;"><strong>Final Rank:</strong> ${location.final_rank
                    }</p>
                          <p style="margin: 0;"><strong>Coordinates:</strong> ${location.lat.toFixed(
                        6
                    )}, ${location.lng.toFixed(6)}</p>
                      </div>
                  `;

                const infoWindow = new google.maps.InfoWindow({
                    content: infoContent
                });

                marker.addListener("click", () => {
                    infoWindow.open(map, marker);
                });
            });

            // Create grid overlay
            const bounds = new google.maps.LatLngBounds();
            locationData.forEach((location) => {
                bounds.extend(new google.maps.LatLng(location.lat, location.lng));
            });

            // Expand bounds slightly to ensure all markers are visible
            bounds.extend(
                new google.maps.LatLng(
                    bounds.getNorthEast().lat() + 0.003,
                    bounds.getNorthEast().lng() + 0.003
                )
            );
            bounds.extend(
                new google.maps.LatLng(
                    bounds.getSouthWest().lat() - 0.003,
                    bounds.getSouthWest().lng() - 0.003
                )
            );
            map.fitBounds(bounds);

            // Draw grid lines connecting the points
            const gridLines = [];

            // Find unique latitudes and longitudes
            const uniqueLats = [...new Set(locationData.map((loc) => loc.lat))];
            const uniqueLngs = [...new Set(locationData.map((loc) => loc.lng))];

            // Draw horizontal grid lines

            // Draw circular grid lines to create a grid pattern
            const center = {
                lat: (bounds.getNorthEast().lat() + bounds.getSouthWest().lat()) / 2,
                lng: (bounds.getNorthEast().lng() + bounds.getSouthWest().lng()) / 2
            };

            const radiusStep = 0.008; // Approximately 500 meters
            const numCircles = 10;

            for (let i = 1; i <= numCircles; i++) {
                const radius = i * radiusStep;
                const circle = new google.maps.Circle({
                    strokeColor: "#f97316",
                    strokeOpacity: 0.3,
                    strokeWeight: 1,
                    fillOpacity: 0,
                    map: map,
                    center: center,
                    radius: radius * 111000 // Convert degrees to meters (approx)
                });
            }

            // Add a legend to the map
            const legend = document.createElement("div");
            legend.style.backgroundColor = "white";
            legend.style.padding = "6px";
            legend.style.margin = "8px";
            legend.style.border = "1px solid #e5e7eb";
            legend.style.borderRadius = "4px";
            legend.style.fontSize = "9px";
            legend.style.boxShadow = "0 1px 2px rgba(0,0,0,0.1)";
            legend.innerHTML =
                '<div style="font-weight:600;margin-bottom:4px;color:#1f2937;">Legend</div>' +
                '<div style="display:flex;align-items:center;margin-bottom:3px;"><div style="width:8px;height:8px;background:#10b981;border-radius:50%;margin-right:4px;"></div>Good Rank (10)</div>' +
                '<div style="display:flex;align-items:center;margin-bottom:3px;"><div style="width:8px;height:8px;background:#f59e0b;border-radius:50%;margin-right:4px;"></div>Medium (11-15)</div>' +
                '<div style="display:flex;align-items:center;margin-bottom:3px;"><div style="width:8px;height:8px;background:#ef4444;border-radius:50%;margin-right:4px;"></div>Poor Rank (>15)</div>' +
                '<div style="display:flex;align-items:center;margin-bottom:3px;"><div style="width:16px;height:2px;background:#f97316;margin-right:4px;"></div>Grid Line</div>' +
                '<div style="display:flex;align-items:center;"><div style="width:12px;height:12px;border:1px solid #f97316;border-radius:50%;margin-right:4px;"></div>Radius</div>';

            map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);
        }

        // Initialize Charts
        function initCharts() {
            Chart.register(ChartDataLabels);

            // Calculate keyword averages
            const keywordAverages = calculateKeywordAverages();

            // Collect all relevance data
            const relevanceData = {
                high: 0,
                medium: 0,
                low: 0
            };

            // Count keywords by relevance category based on their average rank
            Object.values(keywordAverages).forEach((data) => {
                if (data.avgRank <= 7) {
                    relevanceData.low++; // Low relevance (good)
                } else if (data.avgRank <= 15) {
                    relevanceData.medium++; // Medium relevance
                } else {
                    relevanceData.high++; // High relevance (poor)
                }
            });

            const rankDistCtx = document
                .getElementById("rankDistributionChart")
                .getContext("2d");

            // Count occurrences of each final rank
            const rankCounts = {};
            locationData.forEach((location) => {
                const rank = location.final_rank;
                rankCounts[rank] = (rankCounts[rank] || 0) + 1;
            });

            const rankLabels = Object.keys(rankCounts).sort((a, b) => a - b);
            const rankValues = rankLabels.map((rank) => rankCounts[rank]);

            // Determine colors based on rank value
            const rankColors = rankLabels.map((rank) => {
                if (rank <= 10) return "#10b981"; // Green for good ranks
                if (rank <= 15) return "#f59e0b"; // Yellow for medium ranks
                return "#ef4444"; // Red for poor ranks
            });

            const rankDistChart = new Chart(rankDistCtx, {
                type: "pie",
                data: {
                    labels: rankLabels.map((rank) => `Rank ${rank}`),
                    datasets: [
                        {
                            data: rankValues,
                            backgroundColor: rankColors,
                            borderColor: "#ffffff",
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        datalabels: {
                            color: "#ffffff",
                            font: {
                                weight: "bold",
                                size: 16
                            },
                            formatter: (value, context) => {
                                return value > 0 ? value : "";
                            }
                        },
                        legend: {
                            position: "right",
                            labels: {
                                boxWidth: 8,
                                padding: 6,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            bodyFont: {
                                size: 12
                            },
                            callbacks: {
                                label: function (context) {
                                    const label = context.label || "";
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce(
                                        (a, b) => a + b,
                                        0
                                    );
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });

            // Calculate overall averages across all keywords
            let totalRank = 0;
            let totalFinalRank = 0;
            let totalPercentage = 0;
            let totalCount = 0;

            // Collect all keyword data points
            locationData.forEach((location) => {
                location.data.forEach((item) => {
                    totalRank += item.location_rank.rank;
                    totalFinalRank += location.final_rank;
                    totalPercentage += item.percentage;
                    totalCount++;
                });
            });

            // Calculate averages
            const overallAvgRank = totalRank / totalCount;
            const overallAvgFinalRank = totalFinalRank / totalCount;
            const overallAvgPercentage = totalPercentage / totalCount;

            // Update summary stats
            document.getElementById("avg-keyword-rank").textContent =
                overallAvgRank.toFixed(1);
            document.getElementById("avg-final-rank").textContent =
                overallAvgFinalRank.toFixed(1);
            document.getElementById("avg-percentage").textContent =
                overallAvgPercentage.toFixed(1) + "%";

            //populateKeywordsPerformantChart(overallAvgRank, overallAvgFinalRank, overallAvgPercentage)
        }

        function populateKeywordsPerformantChart (
            overallAvgRank,
            overallAvgFinalRank,
            overallAvgPercentage
        ) {
            const overallCtx = document
                .getElementById("overallPerformanceChart")
                .getContext("2d");

            const overallChart = new Chart(overallCtx, {
                type: "bar",
                data: {
                    labels: ["Keyword Rank", "Final Rank", "Percentage (%)"],
                    datasets: [
                        {
                            label: "Overall Performance",
                            data: [
                                overallAvgRank,
                                overallAvgFinalRank,
                                overallAvgPercentage
                            ],
                            backgroundColor: [
                                "#f97316", // orange
                                "#fb923c", // lighter orange
                                "#fdba74" // even lighter orange
                            ],
                            borderColor: "#ffffff",
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                font: {
                                    size: 16 // Increased font size for better readability
                                }
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 14 // Increased font size for x-axis labels
                                }
                            }
                        }
                    },
                    plugins: {
                        datalabels: {
                            color: "#ffffff",
                            backgroundColor: "rgba(0, 0, 0, 0.6)",
                            borderRadius: 3,
                            font: {
                                weight: "bold",
                                size: 14 // Increased size for the labels inside the bars
                            },
                            padding: 5,
                            formatter: (value) => {
                                return value.toFixed(1);
                            }
                        },
                        legend: {
                            display: false,
                        },
                        tooltip: {
                            bodyFont: {
                                size: 14 // Increased tooltip font size for better readability
                            }
                        }
                    }
                }
            });
        }
        // Populate Keyword Performance Table
        function populateKeywordTable() {
            const tableBody = document.getElementById("keywordTableBody");
            const keywordAverages = calculateKeywordAverages();

            // Add a row for each keyword with its average metrics
            for (const [keyword, data] of Object.entries(keywordAverages)) {
                const row = document.createElement("tr");

                // Determine performance status
                let performanceStatus = "poor";
                let performanceClass = "performance-poor";

                if (data.avgRank <= 7) {
                    performanceStatus = "good";
                    performanceClass = "performance-good";
                } else if (data.avgRank <= 15) {
                    performanceStatus = "medium";
                    performanceClass = "performance-medium";
                }

                row.innerHTML = `
                      <td class="keyword-cell" title="${keyword}">
                          <span class="badge badge-orange">${keyword}</span>
                      </td>
                      <td>${data.avgRank.toFixed(1)}</td>
                      <td>${data.avgFinalRank.toFixed(1)}</td>
                      <td>${data.avgPercentage.toFixed(1)}%</td>
                      <td>${data.count}</td>
                      <td><span class="performance-indicator ${performanceClass}"></span>${performanceStatus}</td>
                  `;

                tableBody.appendChild(row);
            }

            // Add an overall average row
            const overallRow = document.createElement("tr");
            overallRow.style.backgroundColor = "#fff7ed"; // Light orange background
            overallRow.style.fontWeight = "bold";

            // Calculate overall averages
            let totalRank = 0;
            let totalFinalRank = 0;
            let totalPercentage = 0;
            let totalCount = 0;

            Object.values(keywordAverages).forEach((data) => {
                totalRank += data.avgRank * data.count;
                totalFinalRank += data.avgFinalRank * data.count;
                totalPercentage += data.avgPercentage * data.count;
                totalCount += data.count;
            });

            const avgRank = totalRank / totalCount;
            const avgFinalRank = totalFinalRank / totalCount;
            const avgPercentage = totalPercentage / totalCount;

            // Determine overall performance status
            let overallPerformanceStatus = "poor";
            let overallPerformanceClass = "performance-poor";

            if (avgRank <= 7) {
                overallPerformanceStatus = "good";
                overallPerformanceClass = "performance-good";
            } else if (avgRank <= 15) {
                overallPerformanceStatus = "medium";
                overallPerformanceClass = "performance-medium";
            }

            overallRow.innerHTML = `
                  <td>
                      <span class="badge badge-orange">Overall Average</span>
                  </td>
                  <td>${avgRank.toFixed(1)}</td>
                  <td>${avgFinalRank.toFixed(1)}</td>
                  <td>${avgPercentage.toFixed(1)}%</td>
                  <td>${totalCount}</td>
                  <td><span class="performance-indicator ${overallPerformanceClass}"></span>${overallPerformanceStatus}</td>
              `;

            tableBody.appendChild(overallRow);
        }

        // Initialize everything when the page loads
        window.onload = function () {
            initMap();
            initCharts();
            populateKeywordTable();

            document.getElementById("rankNumber").innerHTML = `${seoData.avg_rank_value.toFixed(2)}`;

            let finalPercentage = "metric-pill-green"

            if (seoData.avg_rank_value >= 8 && seoData.avg_rank_value <= 14) {
                finalPercentage = "metric-pill-yellow"
            }
            else if (seoData.avg_rank_value >= 15) {
                finalPercentage = "metric-pill-red"
            }
            document.getElementById("rankNumber").classList.add(finalPercentage)

            const ctx = document.getElementById("doughnutChart").getContext("2d");
            new Chart(ctx, {
            type: "doughnut",
            data: {
                labels: ["Low", "Medium", "High"],
                datasets: [
                {
                    label: "Average Percentage",
                    data: [
                        seoData.low_relevance,
                        seoData.medium_relevance,
                        seoData.high_relevance
                    ],
                    backgroundColor: [
                    "#FF5733",
                    "#FFC300",
                    "#4CAF50",
                    "#2196F3",
                    "#9C27B0"
                    ],
                    borderColor: ["#D84315", "#FF8F00", "#2E7D32", "#1565C0", "#6A1B9A"],
                    borderWidth: 2
                }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: "0%",
                plugins: {
                    datalabels: {
                            color: "#ffffff",
                            font: {
                                weight: "bold",
                                size: 20
                            },
                            formatter: (value) => {
                                return value > 0 ? value : "";
                            }
                        },
                    legend: {
                        position: "right",
                        labels: {
                                boxWidth: 30,
                                padding: 6,
                                font: {
                                    size: 17
                                }
                            }
                    },
                    tooltip: {
                        bodyFont: {
                            size: 16,
                        },
                        callbacks: {
                                label: function (context) {
                                    const label = context.label || "";
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce(
                                        (a, b) => a + b,
                                        0
                                    );
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                    }
                }
            }
            });

        };
    </script>

</body>

</html>